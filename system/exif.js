const _0x190d90=_0x20ac;(function(_0x23d6af,_0x4ba4df){const _0x47ee97=_0x20ac,_0x52f9f8=_0x23d6af();while(!![]){try{const _0x84b303=parseInt(_0x47ee97(0x106))/0x1*(parseInt(_0x47ee97(0xf4))/0x2)+-parseInt(_0x47ee97(0x111))/0x3+-parseInt(_0x47ee97(0xeb))/0x4*(-parseInt(_0x47ee97(0xe8))/0x5)+-parseInt(_0x47ee97(0xe9))/0x6*(parseInt(_0x47ee97(0x119))/0x7)+parseInt(_0x47ee97(0xe4))/0x8*(parseInt(_0x47ee97(0xf3))/0x9)+parseInt(_0x47ee97(0xfc))/0xa*(-parseInt(_0x47ee97(0xf0))/0xb)+-parseInt(_0x47ee97(0xe5))/0xc*(-parseInt(_0x47ee97(0x115))/0xd);if(_0x84b303===_0x4ba4df)break;else _0x52f9f8['push'](_0x52f9f8['shift']());}catch(_0x32e479){_0x52f9f8['push'](_0x52f9f8['shift']());}}}(_0x1a3c,0x1ec03));function _0x1a3c(){const _0x154f00=['.mp4','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','load','utf-8','24uoJsrC','12jQrvgj','node-webpmux','length','9205YWUDAn','6WsShlU','from','436RlNfBI','unlinkSync','-loop','writeFileSync','stringify','11ZihTKX','toString','-vcodec','57303bhhkst','962ZVVEEo','Image','crypto','00:00:05','.webp','packname','test','randomBytes','915950xNvZGq','join','author','webp','utf8','-vsync','error','-vf','exif','-an','2jHYHJJ','00:00:00','writeUIntLE','readFileSync','exports','-ss','concat','mimetype','save','toFormat','fluent-ffmpeg','740754pIszje','addOutputOptions','end','data','3667157RLGQoH','categories','libwebp','hex','268471xRmCNR','readUIntLE','https://github.com/DikaArdnt/Hisoka-Morou'];_0x1a3c=function(){return _0x154f00;};return _0x1a3c();}const fs=require('fs'),{tmpdir}=require('os'),Crypto=require(_0x190d90(0xf6)),ff=require(_0x190d90(0x110)),webp=require(_0x190d90(0xe6)),path=require('path');async function imageToWebp(_0x3b67bc){const _0x4c7a14=_0x190d90,_0x37230a=path[_0x4c7a14(0xfd)](tmpdir(),Crypto[_0x4c7a14(0xfb)](0x6)[_0x4c7a14(0x11a)](0x0,0x6)[_0x4c7a14(0xf1)](0x24)+_0x4c7a14(0xf8)),_0x5665a3=path[_0x4c7a14(0xfd)](tmpdir(),Crypto[_0x4c7a14(0xfb)](0x6)[_0x4c7a14(0x11a)](0x0,0x6)[_0x4c7a14(0xf1)](0x24)+'.jpg');fs[_0x4c7a14(0xee)](_0x5665a3,_0x3b67bc),await new Promise((_0x199c74,_0x4c57f8)=>{const _0x2e0b5f=_0x4c7a14;ff(_0x5665a3)['on'](_0x2e0b5f(0x102),_0x4c57f8)['on'](_0x2e0b5f(0x113),()=>_0x199c74(!![]))['addOutputOptions']([_0x2e0b5f(0xf2),'libwebp','-vf',_0x2e0b5f(0xe1)])['toFormat']('webp')[_0x2e0b5f(0x10e)](_0x37230a);});const _0x4fa13b=fs[_0x4c7a14(0x109)](_0x37230a);return fs[_0x4c7a14(0xec)](_0x37230a),fs['unlinkSync'](_0x5665a3),_0x4fa13b;}function _0x20ac(_0x3ba0d8,_0x593679){const _0x1a3c72=_0x1a3c();return _0x20ac=function(_0x20accc,_0x213b3b){_0x20accc=_0x20accc-0xdf;let _0x3f5e1d=_0x1a3c72[_0x20accc];return _0x3f5e1d;},_0x20ac(_0x3ba0d8,_0x593679);}async function videoToWebp(_0x30e4f4){const _0x47cd1d=_0x190d90,_0x38bdbe=path[_0x47cd1d(0xfd)](tmpdir(),Crypto[_0x47cd1d(0xfb)](0x6)['readUIntLE'](0x0,0x6)[_0x47cd1d(0xf1)](0x24)+_0x47cd1d(0xf8)),_0x347d65=path[_0x47cd1d(0xfd)](tmpdir(),Crypto['randomBytes'](0x6)[_0x47cd1d(0x11a)](0x0,0x6)[_0x47cd1d(0xf1)](0x24)+_0x47cd1d(0xe0));fs[_0x47cd1d(0xee)](_0x347d65,_0x30e4f4),await new Promise((_0x4070fe,_0x5a91de)=>{const _0x54c5df=_0x47cd1d;ff(_0x347d65)['on'](_0x54c5df(0x102),_0x5a91de)['on'](_0x54c5df(0x113),()=>_0x4070fe(!![]))[_0x54c5df(0x112)](['-vcodec',_0x54c5df(0x117),_0x54c5df(0x103),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse',_0x54c5df(0xed),'0',_0x54c5df(0x10b),_0x54c5df(0x107),'-t',_0x54c5df(0xf7),'-preset','default',_0x54c5df(0x105),_0x54c5df(0x101),'0'])[_0x54c5df(0x10f)](_0x54c5df(0xff))[_0x54c5df(0x10e)](_0x38bdbe);});const _0x2ad393=fs['readFileSync'](_0x38bdbe);return fs[_0x47cd1d(0xec)](_0x38bdbe),fs['unlinkSync'](_0x347d65),_0x2ad393;}async function writeExifImg(_0x5c8d73,_0x42fdee){const _0x484004=_0x190d90;let _0x5122e2=await imageToWebp(_0x5c8d73);const _0x2eb944=path[_0x484004(0xfd)](tmpdir(),Crypto[_0x484004(0xfb)](0x6)[_0x484004(0x11a)](0x0,0x6)[_0x484004(0xf1)](0x24)+'.webp'),_0x1cc70a=path[_0x484004(0xfd)](tmpdir(),Crypto['randomBytes'](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x484004(0xf8));fs[_0x484004(0xee)](_0x2eb944,_0x5122e2);if(_0x42fdee[_0x484004(0xf9)]||_0x42fdee['author']){const _0x2a7092=new webp[(_0x484004(0xf5))](),_0x350f73={'sticker-pack-id':_0x484004(0xdf),'sticker-pack-name':_0x42fdee[_0x484004(0xf9)],'sticker-pack-publisher':_0x42fdee[_0x484004(0xfe)],'emojis':_0x42fdee[_0x484004(0x116)]?_0x42fdee['categories']:['']},_0xe07cd=Buffer[_0x484004(0xea)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1564ed=Buffer[_0x484004(0xea)](JSON[_0x484004(0xef)](_0x350f73),_0x484004(0xe3)),_0x5e0b28=Buffer[_0x484004(0x10c)]([_0xe07cd,_0x1564ed]);return _0x5e0b28['writeUIntLE'](_0x1564ed[_0x484004(0xe7)],0xe,0x4),await _0x2a7092['load'](_0x2eb944),fs[_0x484004(0xec)](_0x2eb944),_0x2a7092[_0x484004(0x104)]=_0x5e0b28,await _0x2a7092[_0x484004(0x10e)](_0x1cc70a),_0x1cc70a;}}async function writeExifVid(_0x136647,_0x379bfe){const _0x222c0a=_0x190d90;let _0x408b97=await videoToWebp(_0x136647);const _0x25efe1=path['join'](tmpdir(),Crypto[_0x222c0a(0xfb)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x222c0a(0xf8)),_0x5b401b=path[_0x222c0a(0xfd)](tmpdir(),Crypto['randomBytes'](0x6)[_0x222c0a(0x11a)](0x0,0x6)[_0x222c0a(0xf1)](0x24)+_0x222c0a(0xf8));fs[_0x222c0a(0xee)](_0x25efe1,_0x408b97);if(_0x379bfe[_0x222c0a(0xf9)]||_0x379bfe[_0x222c0a(0xfe)]){const _0x3a394e=new webp[(_0x222c0a(0xf5))](),_0x35bfa7={'sticker-pack-id':_0x222c0a(0xdf),'sticker-pack-name':_0x379bfe['packname'],'sticker-pack-publisher':_0x379bfe['author'],'emojis':_0x379bfe['categories']?_0x379bfe[_0x222c0a(0x116)]:['']},_0x4dbd22=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x19be23=Buffer[_0x222c0a(0xea)](JSON[_0x222c0a(0xef)](_0x35bfa7),_0x222c0a(0xe3)),_0x13af3e=Buffer[_0x222c0a(0x10c)]([_0x4dbd22,_0x19be23]);return _0x13af3e['writeUIntLE'](_0x19be23[_0x222c0a(0xe7)],0xe,0x4),await _0x3a394e[_0x222c0a(0xe2)](_0x25efe1),fs[_0x222c0a(0xec)](_0x25efe1),_0x3a394e['exif']=_0x13af3e,await _0x3a394e[_0x222c0a(0x10e)](_0x5b401b),_0x5b401b;}}async function writeExif(_0x22cde2,_0x5b047c){const _0x2f311a=_0x190d90;let _0x19ee6e=/webp/[_0x2f311a(0xfa)](_0x22cde2[_0x2f311a(0x10d)])?_0x22cde2[_0x2f311a(0x114)]:/image/[_0x2f311a(0xfa)](_0x22cde2[_0x2f311a(0x10d)])?await imageToWebp(_0x22cde2[_0x2f311a(0x114)]):/video/[_0x2f311a(0xfa)](_0x22cde2[_0x2f311a(0x10d)])?await videoToWebp(_0x22cde2[_0x2f311a(0x114)]):'';const _0x32e1b6=path[_0x2f311a(0xfd)](tmpdir(),Crypto[_0x2f311a(0xfb)](0x6)[_0x2f311a(0x11a)](0x0,0x6)[_0x2f311a(0xf1)](0x24)+_0x2f311a(0xf8)),_0x28ca6c=path[_0x2f311a(0xfd)](tmpdir(),Crypto[_0x2f311a(0xfb)](0x6)[_0x2f311a(0x11a)](0x0,0x6)[_0x2f311a(0xf1)](0x24)+'.webp');fs[_0x2f311a(0xee)](_0x32e1b6,_0x19ee6e);if(_0x5b047c['packname']||_0x5b047c[_0x2f311a(0xfe)]){const _0xb31189=new webp['Image'](),_0x41a891={'sticker-pack-id':_0x2f311a(0xdf),'sticker-pack-name':_0x5b047c[_0x2f311a(0xf9)],'sticker-pack-publisher':_0x5b047c[_0x2f311a(0xfe)],'emojis':_0x5b047c[_0x2f311a(0x116)]?_0x5b047c[_0x2f311a(0x116)]:['']},_0x158218=Buffer[_0x2f311a(0xea)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x1281a8=Buffer[_0x2f311a(0xea)](JSON[_0x2f311a(0xef)](_0x41a891),_0x2f311a(0xe3)),_0x2d1b95=Buffer['concat']([_0x158218,_0x1281a8]);return _0x2d1b95[_0x2f311a(0x108)](_0x1281a8['length'],0xe,0x4),await _0xb31189['load'](_0x32e1b6),fs[_0x2f311a(0xec)](_0x32e1b6),_0xb31189[_0x2f311a(0x104)]=_0x2d1b95,await _0xb31189[_0x2f311a(0x10e)](_0x28ca6c),_0x28ca6c;}}async function addExif(_0x318324,_0x2ea5b6,_0x3766b3,_0x300d1b=[''],_0x9a5d51={}){const _0x3748ab=_0x190d90,_0x109c69=new webp[(_0x3748ab(0xf5))](),_0x1f670c=Crypto['randomBytes'](0x20)[_0x3748ab(0xf1)](_0x3748ab(0x118)),_0x1a6628={'sticker-pack-id':_0x1f670c,'sticker-pack-name':_0x2ea5b6,'sticker-pack-publisher':_0x3766b3,'emojis':_0x300d1b,..._0x9a5d51};let _0x36a31c=Buffer[_0x3748ab(0xea)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x248c32=Buffer[_0x3748ab(0xea)](JSON['stringify'](_0x1a6628),_0x3748ab(0x100)),_0x3b9f26=Buffer[_0x3748ab(0x10c)]([_0x36a31c,_0x248c32]);return _0x3b9f26[_0x3748ab(0x108)](_0x248c32[_0x3748ab(0xe7)],0xe,0x4),await _0x109c69['load'](_0x318324),_0x109c69[_0x3748ab(0x104)]=_0x3b9f26,await _0x109c69[_0x3748ab(0x10e)](null);}module[_0x190d90(0x10a)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif,'addExif':addExif};